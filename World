// MAIN

package FinalProject;

import java.awt.Color;
import java.awt.Dimension;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.io.IOException;
import javax.swing.*;

public class World extends JFrame implements ActionListener
{
  Roster roster = new Roster();
//JMenuItems
  JMenuItem load, add, save, plot;
  JPanel panel;
  JTable table;
  
  JButton btn;
    JFrame frame;
    JComboBox<String> m;
    JComboBox<Integer> d;
    
    int day;
    String month;
    
  public World()
  {
  
	  JFrame frame = new JFrame("Menu");
	  
	  frame.setSize(700,500);
	  frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
	  
	  // Table arrays
	  
	  String [] headers = {"ID","First Name","Last Name","Program","Level","ASURITE"};
	  
	  Object [][] input = {
			  {"121","Javier","Gonzalez","Comp Sci","Graduate","Jgonz"},
	  };
	  
	  table = new JTable(input,headers);
	  table.setPreferredScrollableViewportSize(new Dimension(400,50));
	  table.setFillsViewportHeight(true);
	  
	  // Adding Scroll
	  JScrollPane scroll = new JScrollPane(table);
	  
	  panel = new JPanel();
	  panel.add(table);
	  panel.add(scroll);
	  
	  frame.add(panel);
	  frame.setVisible(true);
	  
	  JMenuBar menu = new JMenuBar();
	  frame.setJMenuBar(menu);
	    
	  JMenu file = new JMenu("File");
	  menu.add(file);
	    
	  JMenu about = new JMenu("About");
	  menu.add(about);
	    
	  load = new JMenuItem("Load a Roster");
	  load.addActionListener(this);
	    
	  add = new JMenuItem("Add Attendance");
	  add.addActionListener(this);
	  
	  save = new JMenuItem("Save");
	  save.addActionListener(this);
	  
	  plot = new JMenuItem("Plot Data");
	  plot.addActionListener(this);
	  
	  file.add(load);
	  file.add(add);
	  file.add(save);
	  file.add(plot);
  }
  
  public static void main(String[] args) 
  {
    FinalProjectCSE360 world = new FinalProjectCSE360();
  }
  
  // watches to see if button is pressed; if so-> calls resulting method in roster
  public void actionPerformed(ActionEvent e)
  {
    if(e.getSource() == load)
    {
        String cvs = getCVS();
        if(!cvs.equalsIgnoreCase("canceled"))
            roster.load(cvs);
    }
    if(e.getSource() == add)
    {
        PickDate();
    }
    if(e.getSource() == save)
		try {
			roster.save();
		} catch (IOException e1) {
			e1.printStackTrace();
		}
    if(e.getSource() == plot)
    	roster.plot();
    if(e.getSource() == btn)
        {
            frame.dispose();
            String cvs = getCVS();
            if(!cvs.equalsIgnoreCase("canceled"))
            roster.addAttendance(day, month, cvs);
        }
  }
  
  // gets cvs file
  // checks if :    1: File ends in cvs
  //                2: Option was not canceled
    public String getCVS()
    {
        JFileChooser file = new JFileChooser(FileSystemView.getFileSystemView().getHomeDirectory());
        int r = file.showOpenDialog(null);
        if(r == JFileChooser.APPROVE_OPTION)
        {
            return file.getSelectedFile().getAbsolutePath();
        }
        return "canceled";
    }
    
    public void PickDate()
    {
        frame = new JFrame("date picker");
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setSize(200, 200);

        JLabel lb1 = new JLabel("Select Month");
        lb1.setVisible(true);
        JLabel lb2 = new JLabel("Select Day");
        lb2.setVisible(true);
        
        String[] month = { "Jan","Feb", "March","April","May","June","July",
            "Aug", "Sept", "Oct", "Nov", "Dec"};
        Integer[] day = {1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 
            18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31};

        m = new JComboBox<String>(month);
        d = new JComboBox<>(day);
        btn = new JButton("OK");
        btn.addActionListener(this);
        
        frame.add(lb1);
        frame.add(m);
        frame.add(lb2);
        frame.add(d);
        frame.add(btn);
        frame.setLayout(new GridLayout(5,1));
    }
}
